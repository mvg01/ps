#include <bits/stdc++.h>
using namespace std;

int n, m, mat[501][501], ans;
int d[19][4][2] = {
    // 시계방향 90도씩 회전
    {{0, 0}, {0, 1}, {0, 2}, {0, 3}}, // ㅡ
    {{0, 0}, {1, 0}, {2, 0}, {3, 0}},
    {{0, 0}, {1, 0}, {1, 1}, {0, 1}}, // ㅁ
    {{0, 0}, {1, 0}, {2, 0}, {2, 1}}, // L
    {{0, 0}, {1, 0}, {0, 1}, {0, 2}},
    {{0, 0}, {0, 1}, {1, 1}, {2, 1}},
    {{0, 0}, {0, 1}, {0, 2}, {-1, 2}},
    {{0, 0}, {0, 1}, {-1, 1}, {-2, 1}}, // _|
    {{0, 0}, {1, 0}, {1, 1}, {1, 2}},
    {{0, 0}, {0, 1}, {1, 0}, {2, 0}},
    {{0, 0}, {0, 1}, {0, 2}, {1, 2}},
    {{0, 0}, {1, 0}, {1, 1}, {2, 1}}, // ㄴㄱ
    {{0, 0}, {0, 1}, {-1, 1}, {-1, 2}},
    {{0, 0}, {1, 0}, {1, -1}, {2, -1}}, // ㄱㄴ
    {{0, 0}, {0, 1}, {1, 1}, {1, 2}},
    {{0, 0}, {0, 1}, {0, 2}, {1, 1}}, // ㅜ
    {{0, 0}, {0, 1}, {-1, 1}, {1, 1}},
    {{0, 0}, {0, 1}, {0, 2}, {-1, 1}},
    {{0, 0}, {1, 0}, {2, 0}, {1, 1}},
};

void f(int y, int x)
{
    for (int i = 0; i < 19; i++)
    {
        int t = 0;
        bool no = 0;
        for (int j = 0; j < 4; j++)
        {
            int yy = y + d[i][j][0];
            int xx = x + d[i][j][1];
            if (yy >= n || yy < 0 || xx >= m || xx < 0)
            {
                no = 1;
                break;
            }
            t += mat[yy][xx];
        }
        if (!no)
            ans = max(t, ans);
    }
}

void solve()
{
    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < m; j++)
            f(i, j);
    }
    cout << ans;
}

void input()
{
    cin >> n >> m;
    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < m; j++)
            cin >> mat[i][j];
    }
}

int main()
{
    ios::sync_with_stdio(0);
    cin.tie(0);
    input();
    solve();
}